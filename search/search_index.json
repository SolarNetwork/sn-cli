{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"SolarNetwork CLI","text":"<p>This handbook provides guides and reference documentation for the SolarNetwork command line interface (CLI) tool, <code>s10k</code>. This is a command oriented tool where each command supports its own set of options, along with some global options.</p> <p>Here is an example of running <code>s10k</code> to display the metadata associated with a SolarNode, using the <code>nodes meta list</code> command:</p> <pre><code>s10k --profile demo nodes meta list --node-id 101\n\nProperty Value\n------------------------------------\nnodeId   101\ncreated  2025-08-28T23:22:00.237150Z\nupdated  2025-08-28T23:22:00.237150Z\n{\n  \"pm\" : {\n    \"os\" : {\n      \"arch\" : \"aarch64\",\n      \"name\" : \"Linux\",\n      \"version\" : \"6.1.21-v8+\"\n    }\n  }\n}\n</code></pre>"},{"location":"global-options/","title":"Global options","text":"<p>Some \"global\" options are available irrespective of the command you are running. They must be provided before the command and any subsequent command-specific options. The following global options are supported:</p> Option Long Version Description <code>-h</code> <code>--help</code> Display help information <code>-P</code> <code>--profile</code> Select a profile to use <code>--http-trace</code> Enable HTTP exchange trace logging. Must also configure the <code>net.solarnetwork.http.REQ</code> and/or <code>net.solarnetwork.http.RES</code> logger levels to <code>TRACE</code>. <code>-v</code> <code>--verbose</code> Increase verbosity of output. Can specify multiple times to increase verbosity even more."},{"location":"install/","title":"Install","text":"<p>TODO</p>"},{"location":"logging/","title":"Logging","text":"<p>Debug logging can be enabled by creating an <code>application.yml</code> file in your working directory. You can then configure standard Spring Boot Logging settings. For example if you would like HTTP exchange traces, use the <code>--http-trace</code> global option and then configure <code>application.yml</code> something like this:</p> <pre><code>logging:\n  file.name: \"/var/tmp/s10k.log\"\n  level:\n    net.solarnetwork.http: \"TRACE\"\n  threshold:\n    console: \"OFF\"\n    file: \"TRACE\"\n</code></pre>"},{"location":"profiles/","title":"Profiles","text":"<p>To help make it easier to provide the necessary SolarNetwork credentials to the tool, you can create named credential  profiles that you can specify with the <code>--profile/-P</code> options, for example:</p> <pre><code>s10k --profile=home ...\n</code></pre> <p>The profiles are stored in a <code>$HOME/.s10k/credentials</code> file, where <code>$HOME</code> is your system user's \"home\" directory. For example on macOS for a user <code>alice</code> this might look like <code>/Users/alice/.s10k/credentials</code> or on Linux <code>/home/alice/.s10k/credentials</code>.</p> <p>Warning</p> <p>As you will be configuring your SolarNetwork credentials in this file, you should take care to configure limited permissions to the file.</p> <p>Here is how you could set up the <code>credentials</code> file the first time, ensuring limited permissions to the file:</p> macOS/LinuxWindows <pre><code>mkdir ~/.s10k\nchmod 700 ~/.s10k\ntouch ~/.s10k/credentials\nchmod 600 ~/.s10k/credentials\n</code></pre> <p>TODO</p>"},{"location":"profiles/#credential-profile-structure","title":"Credential profile structure","text":"<p>The credentials profile file is a TOML file, where each profile starts with a <code>[NAME]</code> line, where <code>NAME</code> is the name of the profile. Following that are <code>key = \"value\"</code> configuration lines. For example, here is a <code>credentials</code> file with two profiles named home and work:</p> <pre><code>[home]\nsn_token_id = \"HOME_TOKEN_ID\"\nsn_token_secret = \"HOME_TOKEN_SECRET\"\n\n[work]\nsn_token_id = \"WORK_TOKEN_ID\"\nsn_token_secret = \"WORK_TOKEN_SECRET\"\n</code></pre>"},{"location":"profiles/#profile-properties","title":"Profile properties","text":"<p>The following properties are supported in each profile:</p> Profile Property Description <code>sn_token_id</code> The SolarNetwork token identifier <code>sn_token_secret</code> The SolarNetwork token secret"},{"location":"commands/","title":"Commands","text":"<p>The <code>s10k</code> tool works as a set of commands and sub-commands, in a sort of command hierachy.</p>"},{"location":"commands/nodes/","title":"Nodes Commands","text":"<p>TODO</p>"},{"location":"commands/nodes/meta/","title":"Nodes Meta Commands","text":"<p>The <code>nodes meta</code> commands deal with SolarNode metadata, which is metadata associated with a specific node. Node metadata is both published and consumed by nodes. For example nodes publish metadata about themselves (like hardware architecture and version); node metadata can be easily used in node expressions, which makes it a good candidate for node-level parameters that do not change too frequently.</p>"},{"location":"commands/nodes/meta/csv-get/","title":"Nodes Meta CSV-Get","text":"<p>Extract CSV from node metadata at a specific metadata key path. CSV metadata is often used for tariff schedules in SolarNode, such as tariff schedule expressions.</p>"},{"location":"commands/nodes/meta/csv-get/#usage","title":"Usage","text":"<pre><code>s10k nodes meta csv-get [-mode=&lt;displayMode&gt;] -node=&lt;nodeId&gt;\n                        [-path=&lt;metadataPath&gt;]\n</code></pre>"},{"location":"commands/nodes/meta/csv-get/#options","title":"Options","text":"Option Long Version Description <code>-node=</code> <code>--node-id=</code> the node ID to get metadata from <code>-path=</code> <code>--path=</code> the key path with the CSV data to extract <code>-mode=</code> <code>--display-mode=</code> the format to display the data as, one of <code>CSV</code>, <code>JSON</code>, or <code>PRETTY</code>; defaults to <code>PRETTY</code>"},{"location":"commands/nodes/meta/csv-get/#output","title":"Output","text":"<p>The CSV data, formatted according to the <code>--display-mode</code> option.</p>"},{"location":"commands/nodes/meta/csv-get/#examples","title":"Examples","text":"<p>Show CSV data in the default formatting:</p> Show CSV with pretty formattingOutput <pre><code>s10k --profile demo nodes meta csv-get --node-id 101 --path /pm/cpd/schedule\n</code></pre> <pre><code>+-----------------+-----+---------+------+-----------------+\n|           Month | Day | Weekday | Time | cpdPeriodActive |\n+-----------------+-----+---------+------+-----------------+\n| Jan-Apr,Oct-Dec |     |         |      |               0 |\n+-----------------+-----+---------+------+-----------------+\n|         May-Sep |     |         |      |               1 |\n+-----------------+-----+---------+------+-----------------+\n</code></pre> <p>The same data can be output as CSV as well:</p> Show CSV with CSV formattingOutput <pre><code>s10k --profile demo nodes meta csv-get --node-id 101 --path /pm/cpd/schedule \\\n     --display-mode CSV\n</code></pre> <pre><code>Month,Day,Weekday,Time,cpdPeriodActive\n\"Jan-Apr,Oct-Dec\",,,,0\nMay-Sep,,,,1\n</code></pre> <p>The same data can be output as JSON as well:</p> Show CSV with JSON formattingOutput <pre><code>s10k --profile demo nodes meta csv-get --node-id 101 --path /pm/cpd/schedule \\\n     --display-mode JSON\n</code></pre> <pre><code>[\n  [ \"Month\", \"Day\", \"Weekday\", \"Time\", \"cpdPeriodActive\" ],\n  [ \"Jan-Apr,Oct-Dec\", null, null, null, \"0\" ],\n  [ \"May-Sep\", null, null, null, \"1\" ]\n]\n</code></pre>"},{"location":"commands/nodes/meta/csv-set/","title":"Nodes Meta CSV-Set","text":"<p>Save CSV data to node metadata at a specific metadata key path. CSV metadata is often used for tariff schedules in SolarNode, such as tariff schedule expressions.</p>"},{"location":"commands/nodes/meta/csv-set/#usage","title":"Usage","text":"<pre><code>s10k nodes meta csv-set [-s] [-mode=&lt;displayMode&gt;] -node=&lt;nodeId&gt;\n                        [-path=&lt;metadataPath&gt;] [&lt;csv&gt;]\n</code></pre>"},{"location":"commands/nodes/meta/csv-set/#options","title":"Options","text":"Option Long Version Description <code>-node=</code> <code>--node-id=</code> the node ID to get metadata from <code>-path=</code> <code>--path=</code> the key path with the CSV data to extract <code>-mode=</code> <code>--display-mode=</code> if <code>--verbose</code> then the format to display the saved data as, one of <code>CSV</code>, <code>JSON</code>, or <code>PRETTY</code>; defaults to <code>PRETTY</code> <code>-s</code> <code>--string</code> encode the CSV as a JSON string, intead of JSON arrays"},{"location":"commands/nodes/meta/csv-set/#output","title":"Output","text":"<p>A success message. If the <code>--verbose</code> option specified then this will be followed by a pretty-printed copy of the saved CSV data, formatted according to the <code>--display-mode</code> option.</p>"},{"location":"commands/nodes/meta/csv-set/#string-mode","title":"String mode","text":"<p>The <code>--string</code> option lets you encode the CSV data as a metadata string value, rather than the default method of encoding it as arrays. For example take this sample CSV data:</p> <pre><code>Month,Day,Weekday,Time,cpdPeriodActive\n\"Jan-Apr,Oct-Dec\",,,,0\nMay-Sep,,,,1\n</code></pre> <p>Here is how it would be saved as metadata at the key path <code>/pm/cpd/schedule</code> normally, and with the <code>--string</code> option:</p> Normal CSV metadataString CSV metadata <pre><code>{\n    \"pm\" : {\n        \"cpd\" : {\n            \"schedule\" : [\n                [ \"Month\", \"Day\", \"Weekday\", \"Time\", \"cpdPeriodActive\" ],\n                [ \"Jan-Apr,Oct-Dec\", null, null, null, \"0\" ],\n                [ \"May-Sep\", null, null, null, \"1\" ]\n            ]\n        }\n    }\n}\n</code></pre> <pre><code>{\n    \"pm\" : {\n        \"cpd\" : {\n            \"schedule\" : \"Month,Day,Weekday,Time,cpdPeriodActive\\r\\n\\\"Jan-Apr,Oct-Dec\\\",,,,0\\r\\nMay-Sep,,,,1\"\n        }\n    }\n}\n</code></pre>"},{"location":"commands/nodes/meta/csv-set/#examples","title":"Examples","text":"<p>The data to save can be provided directly as a command argument, for example:</p> CSV as command argument<pre><code>s10k --profile demo nodes meta csv-set --node-id 101 \\\n  --path /pm/cpd/schedule 'Key,Value\\nA,B'\n</code></pre> <p>A file with the data can be referenced using <code>@@</code> followed by the file path:</p> CSV as a file<pre><code>s10k --profile demo nodes meta csv-set --node-id 101 \\\n  --path /pm/cpd/schedule @@/path/to/data.csv\n</code></pre> <p>The data can be read from standard input, like this:</p> CSV read from standard input<pre><code>s10k --profile demo nodes meta csv-set --node-id 101 \\\n  --path /pm/cpd/schedule &lt;/path/to/data.csv\n</code></pre> <p>Similarly, the metadata content can be piped to the command, like this:</p> ExampleOutput Metadata piped from standard input<pre><code>cat /path/to/data.csv |s10k --verbose --profile demo nodes meta csv-set \\\n  --node-id 101 --path /pm/cpd/schedule --display-mode JSON\n</code></pre> <pre><code>CSV saved to to path [/pm/cpd/schedule].\n[\n  [ \"Month\", \"Day\", \"Weekday\", \"Time\", \"cpdPeriodActive\" ],\n  [ \"Jan-Apr,Oct-Dec\", null, null, null, \"0\" ],\n  [ \"May-Sep\", null, null, null, \"1\" ]\n]\n</code></pre>"},{"location":"commands/nodes/meta/delete/","title":"Nodes Meta Delete","text":"<p>Delete all metadata associated with a node.</p>"},{"location":"commands/nodes/meta/delete/#usage","title":"Usage","text":"<pre><code>s10k nodes meta delete -node=&lt;nodeId&gt;\n</code></pre>"},{"location":"commands/nodes/meta/delete/#options","title":"Options","text":"Option Long Version Description <code>-node=</code> <code>--node-id=</code> the node ID to delete metadata from"},{"location":"commands/nodes/meta/delete/#output","title":"Output","text":"<p>A success message.</p>"},{"location":"commands/nodes/meta/delete/#examples","title":"Examples","text":"Delete metadata<pre><code>s10k --profile demo nodes meta delete --node-id 101\n</code></pre>"},{"location":"commands/nodes/meta/list/","title":"Nodes Meta List","text":"<p>Show metadata matching a search filter.</p>"},{"location":"commands/nodes/meta/list/#usage","title":"Usage","text":"<pre><code>s10k nodes meta list [-filter=&lt;filter&gt;] -node=nodeId[,nodeId...]\n                     [-node=nodeId[,nodeId...]]...\n</code></pre>"},{"location":"commands/nodes/meta/list/#options","title":"Options","text":"Option Long Version Description <code>-node=</code> <code>--node-id=</code> the node ID(s) to show metadata for <code>-filter=</code> <code>--filter=</code> an optional metadata filter to limit results to"},{"location":"commands/nodes/meta/list/#output","title":"Output","text":"<p>A listing of all matching node metadata records.</p>"},{"location":"commands/nodes/meta/list/#examples","title":"Examples","text":"<p>You can show exactly the metadata for a single node like this:</p> Show metadata for one nodeOutput <pre><code>s10k --profile demo nodes meta list --node-id 101\n</code></pre> <pre><code>Property Value\n------------------------------------\nnodeId   101\ncreated  2025-08-28T23:22:00.237150Z\nupdated  2025-08-29T05:20:06.322691Z\n{\n    \"m\" : {\n        \"limit\" : 123,\n    }\n}\n</code></pre> <p>You can show multiple node metadatas by providing multiple <code>--node-id</code> options or as a comma-delimited list:</p> Show metadata for multiple nodesOutput <pre><code># using multiple options\ns10k --profile demo nodes meta list --node-id 101 --node-id 102\n\n# or the same thing, using a comma-delimited list\ns10k --profile demo nodes meta list --node-id 101,102\n</code></pre> <pre><code>Property Value\n------------------------------------\nnodeId   101\ncreated  2025-08-28T23:22:00.237150Z\nupdated  2025-08-29T05:20:06.322691Z\n{\n    \"m\" : {\n        \"limit\" : 123\n    }\n}\n\nProperty Value\n------------------------------------\nnodeId   102\ncreated  2025-08-28T12:22:00.433152Z\nupdated  2025-08-28T18:11:21.627128Z\n{\n    \"m\" : {\n        \"limit\" : 234\n    }\n}\n</code></pre> <p>You can restrict the returned metadata using a metadata filter, for example to show only the metadata where <code>limit</code> is greater than <code>200</code>:</p> Show metadata for one nodeOutput <pre><code>s10k --profile demo nodes meta list --node-id 101,102 --filter '(m/limit&gt;200)'\n</code></pre> <pre><code>Property Value\n------------------------------------\nnodeId   102\ncreated  2025-08-28T12:22:00.433152Z\nupdated  2025-08-28T18:11:21.627128Z\n{\n    \"m\" : {\n        \"limit\" : 234\n    }\n}\n</code></pre>"},{"location":"commands/nodes/meta/save/","title":"Nodes Meta Save","text":"<p>Save metadata associated with a node.</p>"},{"location":"commands/nodes/meta/save/#usage","title":"Usage","text":"<pre><code>s10k nodes meta save [-r] -node=&lt;nodeId&gt; [&lt;metadata&gt;]\n</code></pre>"},{"location":"commands/nodes/meta/save/#options","title":"Options","text":"Option Long Version Description <code>-node=</code> <code>--node-id=</code> the node ID to save metadata to <code>-r</code> <code>--replace</code> replace all existing metadata, rather than add/update"},{"location":"commands/nodes/meta/save/#output","title":"Output","text":"<p>A success message, followed by a pretty-printed copy of the saved metadata.</p>"},{"location":"commands/nodes/meta/save/#metadata-structure","title":"Metadata structure","text":"<p>SolarNetwork defines metadata as two tree-like structures along with a set of tags. First there is the <code>m</code> structure that defines a simple key-value pair of simple values (like strings, booleans, and numbers). Then there is the <code>pm</code> structure that defines an arbitrarily-nested tree structure. Then there is the <code>t</code> set of tags. An example looks like this:</p> <pre><code>{\n  \"m\" : {\n    \"limit\" : 10000,\n    \"group\" : \"alpha\"\n  },\n  \"pm\" : {\n    \"os\" : {\n      \"arch\" : \"aarch64\",\n      \"name\" : \"Linux\",\n      \"version\" : \"6.1.21-v8+\"\n    }\n  },\n  \"t\" : [\"west\", \"red\"]\n}\n</code></pre>"},{"location":"commands/nodes/meta/save/#examples","title":"Examples","text":"<p>The metadata to save can be provided directly as a command argument, for example:</p> Metadata as command argument<pre><code>s10k --profile demo nodes meta save --node-id 101 '{\"m\":{\"limit\":123}}'\n</code></pre> <p>A file with the metadata can be referenced using <code>@@</code> followed by the file path:</p> Metadata as a file<pre><code>s10k --profile demo nodes meta save --node-id 101 @@/path/to/metadata.json\n</code></pre> <p>The metadata content can be read from standard input, like this:</p> Metadata read from standard input<pre><code>s10k --profile demo nodes meta save --node-id 101 &lt;/path/to/metadata.json\n</code></pre> <p>Similarly, the metadata content can be piped to the command, like this:</p> ExampleOutput Metadata piped from standard input<pre><code>jq -n --argjson  limit 123 '{\"m\":{\"limit\":$limit}}' \\\n  |s10k --profile demo nodes meta save --node-id 101\n</code></pre> <pre><code>Node metadata added:\n{\n    \"m\" : {\n        \"limit\" : 123\n    }\n}\n</code></pre>"}]}